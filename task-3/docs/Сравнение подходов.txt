Динамический типизированный подход оказался >50 раз медленнее чем ооп на рандомном тесте, а в других тестах отличие не сильно различается (2-5 раз).

В итоге, чтобы реализовать эту задачу, лучше воспользоваться динамическим или же ооп подходом (лично мне с ооп) из-за скорости выполнения задач.